\chapter{Alternate Designs}

\section{Single bar of 4GB}

The first approach in an attempt to interface the full range of on-board DRAM i.e. 4GB to the host machine was made in a straight forward
fashion by keeping a single bar of size 4GB the PCIe interface and it was expected that then by memory mapping by the thus generated
\verb|/sys/resourceX| files(where \verb|X| is an integer) generated by the PCIe-AXI IP would give the whole access to whole DRAM. But even
on repeated attempts of sucessful hardware desgins we could not make the PCIe interface to generate a resource file of size 4GB. At first
this was suspected as an operating system issue but after further digging we found that the usual devices on PCIe bus of this machine had
memory regions of the scale 16MB, 32MB going as far as 64MB. Hence we brought down our bar sizes to 128MB after some trial and error we
found by experimentation that the motherboard had a limit on the BAR sizes of 128MB.We tried multiple BARS of smaller size i.e. 4K, 32MB etc
until we arrived at 128MB limit. This happened out of necessity and lack of open documentation over the internet for the host motherboard.

\pagebreak

\section{Memory Address Translator block} \label{MAT block}

To check access of the host to the full 4GB on board DRAM Memory through a Memory Address Translator Block which Translates a read/write
request in form of two AXI slave register writes to an AXI Master request on the onboard AXI interconnect. It employs 3 registers to
accommodate address, data and type of request respectively. The listing~\ref{lst:MAT} provides the HLS design code for this block and
employs similar pragma statements as explained before.

\input{code_snippets/ajit_fpga/MAT_block/Memory_Address_Translator.tex}

\section{Memory Copier Block}

This block serves as a small DMA, it will copy a block of 128MB of data from one address in memory into another. The 32-bit source and
destination addresses and the read/write type request can be written into AXI Slave registers through the host machine over PCIe interface.
It translates the required addresses and the type of request to an AXI Master request on the interconnect. This block was created as an
alternative way to access the whole on-board DRAM from the host machine when the host motherboard was found to have a limit of 128MB on the
size of \verb|/sys/resourceX| files(where \verb|X| is an integer) generated by the PCIe-AXI IP. The listing~\ref{lst:MCB} provides the HLS
design code for this block and employs similar pragma statements as explained before.

%- Need a diagram to explain the flow of this block
\input{code_snippets/ajit_fpga/Memory_Copier_block/Memory_Copier_block.tex}
